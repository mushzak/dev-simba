$(init);

function init () {

  $(".feature-box").click(function(){
    $(this).toggleClass("active");
  });

  $(window).scroll(function(){
    if ($(this).scrollTop() > 520) {
      $(".main-header").fadeIn(150);
    } else {
      $(".main-header").fadeOut(150);
    }
    if ($(this).scrollTop() > 1100) {
      $(".layers").addClass("animated");
    } else {
      $(".layers").removeClass("animated");
    }
  });

  function toggleButtonText (id, newValue) {
    var currentValue = $(id).html();
    if (currentValue === "HIDE DETAILS") {
      $(id).html(newValue);
    } else {
      $(id).html("HIDE DETAILS");
    }
  }

  $("#strength").click(function(){
    $("#handle").html("HOW WE HANDLE CLIENT ASSETS");
    $("#handle-popup").hide();
    $("#strength-popup").stop().fadeToggle(450);
    toggleButtonText("#strength", "STRENGTH AND STABILITY AT A GLANCE");
  });
  $("#handle").click(function(){
    $("#strength").html("STRENGTH AND STABILITY AT A GLANCE");
    $("#strength-popup").hide();
    $("#handle-popup").stop().fadeToggle(450);
    toggleButtonText("#handle", "HOW WE HANDLE CLIENT ASSETS");
  });

  function swapOpacity(efo, efi) {
    $(efi).detach().insertBefore(".screen:first").css("opacity", 1);
    $(efo).css("opacity", 0);
  }

  var heroBackground = (function() {
    var i = -1,
        $slideshowItems = $(".slideshow").children(),
        $typed = $("#typed"),
        nextImage = function() {
          i = (i+1) % 5;
          switch(i) {
            case 0:
              swapOpacity($slideshowItems[4], $slideshowItems[0]);
              $typed.removeClass().addClass("text-light-blue");
              break;
            case 1:
              swapOpacity($slideshowItems[0], $slideshowItems[1]);
              $typed.removeClass().addClass("text-green");
              break;
            case 2:
              swapOpacity($slideshowItems[1], $slideshowItems[2]);
              $typed.removeClass().addClass("text-light-blue");
              break;
            case 3:
              swapOpacity($slideshowItems[2], $slideshowItems[3]);
              $typed.removeClass().addClass("text-green");
              break;
            case 4:
              swapOpacity($slideshowItems[3], $slideshowItems[4]);
              $typed.removeClass().addClass("text-orange");
              break;
          }
        };
        return {
          nextImage: nextImage
        }
  })();

  $('#typed').typed({
    strings: [
              "saving time.",
              "unpredictable markets.",
              "retiring comfortably.",
              "lowering fees.",
              "dreaming big."
              ],
    backDelay: 2200,
    typeSpeed: 60,
    loop: true,
    preStringTyped: heroBackground.nextImage
  });

}